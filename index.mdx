import {
  Title,
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import {
  github,
  vsDark,
  vsDark as imperativeTheme,
  nightOwl as fpTheme,
} from "@code-surfer/themes";

export const theme = vsDark;

# Hello FP in JS - 2 👋

<div>FE개발팀</div>
<div>Nakta</div>



---

# 오늘 살펴볼 내용

<ul>
  <li>Either</li>
  <li>Monad</li>
</ul>



---

# Maybe

살짝 아쉬운 에러 처리



---

<CodeSurfer>

```jsx 19:22 file=./src/Either/maybe-ex-1.js
```

```jsx 32:40,42:43 file=./src/Either/maybe-ex-1.js subtitle="책을 찾아서 제목의 첫글자를 대문자로 반환"
```

```jsx 34,39 file=./src/Either/maybe-ex-1.js subtitle="Maybe에 책 목록을 넣은 상태"
```

```jsx 14:16 file=./src/Either/maybe-ex-1.js subtitle="map 메소드로 내부 값 변경"
```

```jsx 24:26 file=./src/Either/maybe-ex-1.js subtitle="Maybe의 map을 실행하는 헬퍼 함수"
```

</CodeSurfer>



---

<CodeSurfer>

```jsx 24:26 file=./src/Either/maybe-ex-1.js
```

```jsx file=./src/Either/maybe-ex-2.js
```

```jsx file=./src/Either/maybe-ex-3.js subtitle="메소드 체이닝"
```

```jsx 24:26,36 file=./src/Either/maybe-ex-4.js subtitle="커링된 map 헬퍼 함수"
```

```jsx 38:42 file=./src/Either/maybe-ex-5.js subtitle="파이프라이닝"
```

</CodeSurfer>




---

<CodeSurfer>

```jsx 33,34,36 file=./src/Either/maybe-ex-6.js subtitle="Maybe.of(null) === Nothing"
```

```jsx 24:27 file=./src/Either/maybe-ex-7.js subtitle="Nothing 상태의 Maybe"
```

```jsx 15[12:32] file=./src/Either/maybe-ex-7.js subtitle="아무것도 안함"
```

```jsx file=./src/Either/maybe-ex-8.js subtitle="Nothing은 map을 건너 뛰는것 같은 효과를 본다"
```

```jsx 38,42,43,45,46 file=./src/Either/maybe-ex-1.js subtitle="getOrElse로 Maybe 상태에 따른 분기 처리"
```

</CodeSurfer>




---


<CodeSurferColumns themes={[github, imperativeTheme]}>

<Step>

```markdown title="요구사항"
1. id를 이용해서 책 찾기.
2. 찾은 책의 저자가 Chris인 경우 console.log로 저자명을 출력.
3. 찾은 책의 저자가 Chris가 아닌 경우 console.error로 저자명을 출력
```

```json file=./src/Either/newBooks.json title="책 목록"
```

</Step>


</CodeSurferColumns>



---

<CodeSurfer>

```jsx file=./src/Either/poor-maybe-1.js
```

```jsx file=./src/Either/poor-maybe-2.js subtitle="저자가 크리스인지 유효성 체크"
```

```jsx file=./src/Either/poor-maybe-3.js subtitle="Maybe 반환"
```

```jsx file=./src/Either/poor-maybe-4.js 
```

```jsx file=./src/Either/poor-maybe-5.js
```

```jsx file=./src/Either/poor-maybe-6.js subtitle="저자가 크리스인지 아닌지에 따라 Just나 Nothing을 반환"
```

</CodeSurfer>



---

<CodeSurfer>

```jsx 17,21:25 file=./src/Either/poor-maybe-6.js
```

```jsx file=./src/Either/poor-maybe-7.js
```

```jsx file=./src/Either/poor-maybe-8.js subtitle="상태 값에 따른 분기 처리"
```

```jsx file=./src/Either/poor-maybe-9.js subtitle="익명 함수를 추출"
```

```jsx file=./src/Either/poor-maybe-10.js subtitle="Just는 책을 들고 있다"
```

```jsx file=./src/Either/poor-maybe-11.js subtitle="Nothing은 null을 들고 있다"
```

```jsx file=./src/Either/poor-maybe-12.js subtitle="Nothing은 기본값 지정만 가능"
```

</CodeSurfer>



---

# Either

에러처리시에 참조할 수 있는 값을 갖고있는 펑터



---

<CodeSurferColumns themes={[ imperativeTheme, fpTheme]}>

<Step subtitle="Either는 상태는 두 가지 값을 갖는다">

```markdown
Left
```

```markdown
Right
```

</Step>

</CodeSurferColumns>



---

<CodeSurferColumns>

<Step subtitle="두가지 상태 모두 값을 가질 수 있다.">

```js
// Left('Left Value')
Either.left('Left Value'); 
```

```js
// Right('Right Value')
Either.right("Right Value");
```

</Step>

<Step>

```js subtitle="Nothing + 값"
// Left('Left Value')
Either.left('Left Value'); 
```

```js subtitle="Just와 같은 역할"
// Right('Right Value')
Either.right("Right Value");
```

</Step>

</CodeSurferColumns>



---

<CodeSurferColumns themes={[ imperativeTheme, fpTheme, imperativeTheme]}>

<Step subtitle="Either 구현">

```js file=./src/Either/Either-class.js
```

```js file=./src/Either/Left-class.js
```

```js file=./src/Either/Right-class.js
```

</Step>

<Step subtitle="$value에 값 저장">

```js 2:4 file=./src/Either/Either-class.js
```

```js 1,15,16 file=./src/Either/Left-class-2.js
```

```js 1,15,16 file=./src/Either/Right-class-2.js
```

</Step>

<Step>

```js 6:12,15:19 file=./src/Either/Either-class-2.js subtitle="of와 비슷한 left, right"
```

```js 1,15,16 file=./src/Either/Left-class-2.js
```

```js 1,15,16 file=./src/Either/Right-class-2.js
```

</Step>

</CodeSurferColumns>




---

<CodeSurferColumns themes={[ imperativeTheme, fpTheme ]}>

<Step>

```js file=./src/Either/Left-class.js
```

```js file=./src/Either/Right-class.js
```

</Step>

<Step subtitle="상태 확인">

```js 2:8 file=./src/Either/Left-class.js
```

```js 2:8 file=./src/Either/Right-class.js
```

</Step>

<Step subtitle="map 구현">

```js 10:12 file=./src/Either/Left-class.js
```

```js 10:12 file=./src/Either/Right-class.js
```

</Step>

</CodeSurferColumns>



---

<CodeSurferColumns themes={[ imperativeTheme, fpTheme, imperativeTheme ]}>

<Step>

```js file=./src/Either/Left-class-1.2.js
```

```js 1:3 file=./src/Either/left-right-1.js
```

```js file=./src/Either/Right-class-1.2.js
```

</Step>

<Step>

```js file=./src/Either/Left-class-1.3.js subtitle="map 무시"
```

```js 1:3 file=./src/Either/left-right-1.js
```

```js file=./src/Either/Right-class-1.3.js subtitle="map 실행"
```

</Step>

<Step>

```js 10:12 file=./src/Either/Left-class-1.3.js subtitle="Functor"
```

```js 5:7 file=./src/Either/left-right-1.js
```

```js 10:12 file=./src/Either/Right-class-1.3.js subtitle="Functor"
```

</Step>

<Step>

```js 10:12 file=./src/Either/Left-class-1.4.js
```

```js file=./src/Either/left-right-2.js subtitle="maybe -> functor"
```

```js 10:12 file=./src/Either/Right-class-1.4.js
```

</Step>

<Step>

```js file=./src/Either/Left-class-1.5.js
```

```js file=./src/Either/left-right-2.js
```

```js file=./src/Either/Right-class-1.5.js
```

</Step>

</CodeSurferColumns>



---

<CodeSurfer>

```jsx 17 file=./src/Either/poor-maybe-12.js subtitle="Nothing은 책정보를 들고 있지 않다"
```

```jsx 10:12 file=./src/Either/poor-maybe-12.js subtitle="Maybe를 반환"
```

```jsx 11:13 file=./src/Either/to-either-1.js subtitle="Maybe -> Either"
```

```jsx file=./src/Either/to-either-2.js subtitle="책 정보를 들고있는 Right나 Left"
```

```jsx file=./src/Either/to-either-3.js subtitle="logByMaybeStatus -> logByEitherStatus"
```

```jsx file=./src/Either/to-either-4.js
```

</CodeSurfer>



---

<CodeSurfer>

```jsx 16:18 file=./src/Either/to-either-5.js subtitle="마무리 함수 either"
```

```jsx 16[23:41] file=./src/Either/to-either-5.js subtitle="Left와 Right 상태를 처리할 함수"
```

```jsx 17[10:67] file=./src/Either/to-either-5.js
```

```jsx file=./src/Either/to-either-6.js subtitle="코드 흐름을 눈으로 읽기 쉽다"
```

</CodeSurfer>




---

# Monad

모나드



---

<CodeSurfer>

```jsx 5:7 file=./src/Either/to-either-6.js subtitle="undefined가 반환될 수 있다."
```

```jsx 7 file=./src/Monad/monad-problem-1.js subtitle="Maybe 반환"
```

```jsx 10:14 file=./src/Monad/monad-problem-2.js subtitle="Either"
```

```jsx 12:13 file=./src/Monad/monad-problem-3.js subtitle="Either -> Maybe"
```

```jsx 30:31 file=./src/Monad/monad-problem-3.js subtitle="Maybe(Maybe(Book))"
```

</CodeSurfer>



---

<CodeSurfer>

```jsx 30:31 file=./src/Monad/monad-problem-3.js subtitle="Maybe(Maybe(Book))"
```

```jsx 32 file=./src/Monad/monad-problem-4.js subtitle="map으로 Maybe(Book)에 접근"
```

```jsx file=./src/Monad/monad-problem-5.js subtitle="map을 한번 더해서 Book에 접근"
```

```jsx 33[14:31] file=./src/Monad/monad-problem-6.js subtitle="map((book) => { })은 (maybeBook) => {} 함수를 반환"
```

```jsx 32[9:50],33[14:31],34[5] file=./src/Monad/monad-problem-6.js subtitle="익명 함수와 map((book) => {})은 같다"
```

```jsx file=./src/Monad/monad-problem-7.js
```

```jsx file=./src/Monad/monad-problem-8.js subtitle="찾은 책의 저자명을 로그로 출력"
```

</CodeSurfer>




---

<CodeSurfer>

```jsx 32 file=./src/Monad/monad-problem-8.js subtitle="바깥쪽 Myabe를 벗겨내면 map을 한번만 써도 된다"
```

```jsx file=./src/Monad/monad-problem-9.js subtitle="\$value를 반환하는 익명 함수"
```

```jsx 46:48 file=./src/Monad/monad-problem-10.js subtitle="getOrElse 구현을 Maybe의 메소드로 옮기자"
```

```jsx file=./src/Monad/monad-problem-11.js
```

```jsx file=./src/Monad/monad-problem-12.js subtitle="Maybe의 getOrElse 메소드를 사용 하도록 변경"
```

```jsx file=./src/Monad/monad-problem-13.js subtitle="getOrElse로 한겹 벗겨내기"
```

</CodeSurfer>



---

<CodeSurfer>

```jsx 59 file=./src/Monad/monad-problem-13.js subtitle="Maybe(Book)의 입장에서 생각해보기"
```

```jsx 60 file=./src/Monad/monad-problem-13.js subtitle="validateBookAuthor는 Maybe를 반환한다"
```

```jsx 60:61 file=./src/Monad/monad-problem-13.js subtitle="map(validateBookAuthor) + getOrelse를 묶자"
```

```jsx file=./src/Monad/monad-problem-14.js subtitle="chain = map + getOrElse"
```

```jsx file=./src/Monad/monad-problem-15.js
```

</CodeSurfer>



---

<CodeSurfer>

```jsx 57:60 file=./src/Monad/monad-problem-16.js subtitle="Maybe(Maybe(Book))을 먼저 만들고 getOrElse로 벗겨내기"
```

```jsx file=./src/Monad/monad-problem-17.js subtitle="Maybe 값에 바로 함수 fn 적용"
```

```jsx file=./src/Monad/monad-problem-18.js subtitle="Maybe에 chain 메소드 추가하기"
```

```jsx file=./src/Monad/monad-problem-19.js subtitle="Maybe의 chain을 그대로 호출"
```

</CodeSurfer>



---

# Maybe Functor, Maybe Monad

새로운 모나드를 반환하는 chain 메소드를 구현한 객체



---

<CodeSurferColumns themes={[ imperativeTheme, fpTheme ]}>

<Step>

```markdown subtitle="Functor"
자기 자신과 같은 타입을 반환하는 map 메소드를 구현한 객체
```

```markdown subtitle="Monad"
모나드 타입을 반환하는 chain 메소드를 구현한 객체
```

</Step>

</CodeSurferColumns>



---

<CodeSurfer>

```jsx 52:56 file=./src/Monad/monad-1.js subtitle="Maybe를 반환하는 validate"
```

```jsx 54:55 file=./src/Monad/monad-2.js subtitle="Either를 반환하는 validate"
```

```jsx 84 file=./src/Monad/monad-2.js subtitle="chain의 결과는 Either로 바뀐다"
```

```jsx 84:85 file=./src/Monad/monad-2.js subtitle="펑터는 map으로 연결된다"
```


</CodeSurfer>




---

# 우리가 놓친 것

모나드는 **모나드를 반환하는 chain 메소드를 구현**한 객체



---

<CodeSurferColumns themes={[ imperativeTheme, fpTheme, imperativeTheme]}>

<Step>

```jsx file=./src/Monad/monad-either-1.js
```

```jsx file=./src/Monad/monad-left-1.js
```

```jsx file=./src/Monad/monad-right-1.js
```

</Step>

<Step>

```jsx file=./src/Monad/monad-either-1.js
```

```jsx file=./src/Monad/monad-left-2.js subtitle="그대로 반환"
```

```jsx file=./src/Monad/monad-right-2.js subtitle="값에 함수 적용"
```

</Step>

<Step subtitle="모나드 Either">

```jsx file=./src/Monad/monad-either-1.js
```

```jsx file=./src/Monad/monad-left-2.js
```

```jsx file=./src/Monad/monad-right-2.js
```

</Step>

</CodeSurferColumns>





---

<CodeSurfer>

```jsx 81:94 file=./src/Monad/monad-3.js subtitle="책의 저자명을 출력"
```

```jsx file=./src/Monad/monad-4.js subtitle="title 반환"
```

```jsx file=./src/Monad/monad-5.js subtitle="map을 사용하면 Either(Maybe('title')) 형태가 된다."
```

```jsx file=./src/Monad/monad-6.js subtitle="chain을 사용해서 Either -> Maybe 모나드로 변경."
```

```jsx file=./src/Monad/monad-7.js subtitle="펑터와 모나드 특성을 이용하면 함수 합성이 쉬워진다"
```

</CodeSurfer>



---

# Either

Left: 에러 처리에 필요한 값을 가짐

Right: 정상적인 처리의 값을 가짐



---

# Monad

새로운 모나드를 반환하는 chain 메소드를 구현한 객체

map(map(...)) -> chain(...)



---

# Q & A

지난 발표자료 👉 https://kind-pasteur-0c0824.netlify.app

